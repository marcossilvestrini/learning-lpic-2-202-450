
------------------------------------------------------

Check Bind Stack for This Lab...

------------------------------------------------------


------------------------------------------------------

Check Bind Master...

------------------------------------------------------

Check in file /etc/named.conf...

options {
	listen-on port 53 { 127.0.0.1;192.168.0.140; };
	listen-on-v6 port 53 { ::1; };
	directory 	"/var/named";
	dump-file 	"/var/named/data/cache_dump.db";
	statistics-file "/var/named/data/named_stats.txt";
	memstatistics-file "/var/named/data/named_mem_stats.txt";
	secroots-file	"/var/named/data/named.secroots";
	recursing-file	"/var/named/data/named.recursing";
	allow-query     { localhost;192.168.0.0/24; };
zone "." IN {
	type hint;
	file "named.ca";
};
*/

zone "lpic2.com.br" IN {
	type master;
	file "lpic2.zone";
};

zone "0.168.192.in-addr.arpa" IN {
	type master;
	file "0.168.192.in-addr.arpa.zone";
};

------------------------------------------------------


------------------------------------------------------

Get zones in file /etc/named.conf...

@                   IN      NS      ol9-bind-master.lpic2.com.br.
                            NS      ol9-bind-slave.lpic2.com.br.
                            MX      5       mail
                            MX      10      mail2

ol9-bind-master     A       192.168.0.140   ;glue record
ol9-bind-slave      A       192.168.0.141   ;glue record
ol9-bind-forwarding A       192.168.0.142   ;forwarding server
ol9-bind-caching    A       192.168.0.145   ;caching server
ol9-bind-client     A       192.168.0.150   ;client server
silvestrini         A       192.168.0.100   ;my desktop
mail                A       192.168.0.140   ;mail
mail2               A       192.168.0.141   ;mail
www                 CNAME   ol9-bind-master ;http
ftp                 CNAME   ol9-bind-slave  ;ftp

------------------------------------------------------


------------------------------------------------------

Validade file zone...

zone lpic2.com.br/IN: loaded serial 1
OK

------------------------------------------------------


------------------------------------------------------

Check type records...

;; QUESTION SECTION:
;lpic2.com.br.			IN	ANY

------------------------------------------------------

;; ANSWER SECTION:
lpic2.com.br.		3600	IN	TXT	"leanning LPIC2"
lpic2.com.br.		3600	IN	SOA	ol9-bind-master.lpic2.com.br. admin.lpic2.com.br. 1 28800 7200 604800 3600
lpic2.com.br.		3600	IN	NS	ol9-bind-master.lpic2.com.br.
lpic2.com.br.		3600	IN	NS	ol9-bind-slave.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	5 mail.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	10 mail2.lpic2.com.br.

------------------------------------------------------

;; ADDITIONAL SECTION:
ol9-bind-master.lpic2.com.br. 3600 IN	A	192.168.0.140
ol9-bind-slave.lpic2.com.br. 3600 IN	A	192.168.0.141
mail.lpic2.com.br.	3600	IN	A	192.168.0.140
mail2.lpic2.com.br.	3600	IN	A	192.168.0.141

------------------------------------------------------


------------------------------------------------------

Check Bind Slave...

------------------------------------------------------


------------------------------------------------------

Check file /etc/named.conf...

zone "lpic2.com.br" {
        type slave;
        masters { 192.168.0.140; };
        file "lpic2.zone";
};

------------------------------------------------------

Check file zone...
-rw-r--r-- 1 bind bind 749 Feb  9 14:51 /var/cache/bind/lpic2.zone
lpic2.com.br.				      3600 IN SOA	ol9-bind-master.lpic2.com.br. admin.lpic2.com.br. 1 28800 7200 604800 3600
lpic2.com.br.				      3600 IN NS	ol9-bind-slave.lpic2.com.br.
lpic2.com.br.				      3600 IN NS	ol9-bind-master.lpic2.com.br.
lpic2.com.br.				      3600 IN MX	5 mail.lpic2.com.br.
lpic2.com.br.				      3600 IN MX	10 mail2.lpic2.com.br.
lpic2.com.br.				      3600 IN TXT	"leanning LPIC2"
ftp.lpic2.com.br.			      3600 IN CNAME	ol9-bind-slave.lpic2.com.br.
internal.lpic2.com.br.			      3600 IN A		192.168.0.151
mail.lpic2.com.br.			      3600 IN A		192.168.0.140
mail2.lpic2.com.br.			      3600 IN A		192.168.0.141
ol9-bind-master.lpic2.com.br.		      3600 IN A		192.168.0.140
ol9-bind-slave.lpic2.com.br.		      3600 IN A		192.168.0.141
www.lpic2.com.br.			      3600 IN CNAME	ol9-bind-master.lpic2.com.br.

------------------------------------------------------


------------------------------------------------------

Check type records...

;; ANSWER SECTION:
lpic2.com.br.		3600	IN	SOA	ol9-bind-master.lpic2.com.br. admin.lpic2.com.br. 1 28800 7200 604800 3600
lpic2.com.br.		3600	IN	MX	5 mail.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	10 mail2.lpic2.com.br.
lpic2.com.br.		3600	IN	NS	ol9-bind-slave.lpic2.com.br.
lpic2.com.br.		3600	IN	NS	ol9-bind-master.lpic2.com.br.
lpic2.com.br.		3600	IN	TXT	"leanning LPIC2"

------------------------------------------------------


------------------------------------------------------

Check transference zones...

client @0x7f4628695868 192.168.0.141#41671 (lpic2.com.br): transfer of 'lpic2.com.br/IN': AXFR started (serial 1)
client @0x7f4628695868 192.168.0.141#41671 (lpic2.com.br): transfer of 'lpic2.com.br/IN': AXFR ended: 1 messages, 14 records, 362 bytes, 0.001 secs (362000 bytes/sec) (serial 1)

------------------------------------------------------


------------------------------------------------------

Check Bind Forwarding...

------------------------------------------------------


------------------------------------------------------

Check file /etc/named.conf...

zone "lpic2.com.br" {
        type forward;
        forwarders { 192.168.0.141; };
};

------------------------------------------------------


------------------------------------------------------

Check type records...

;; ANSWER SECTION:
lpic2.com.br.		3600	IN	TXT	"leanning LPIC2"
lpic2.com.br.		3600	IN	SOA	ol9-bind-master.lpic2.com.br. admin.lpic2.com.br. 1 28800 7200 604800 3600
lpic2.com.br.		3600	IN	NS	ol9-bind-master.lpic2.com.br.
lpic2.com.br.		3600	IN	NS	ol9-bind-slave.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	10 mail2.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	5 mail.lpic2.com.br.

------------------------------------------------------


------------------------------------------------------

Check Bind Caching...

------------------------------------------------------


------------------------------------------------------

Check file /etc/named.conf...

options {
	listen-on port 53 { 127.0.0.1;192.168.0.140; };
	listen-on-v6 port 53 { ::1; };
	directory 	"/var/named";
	dump-file 	"/var/named/data/cache_dump.db";
	statistics-file "/var/named/data/named_stats.txt";
	memstatistics-file "/var/named/data/named_mem_stats.txt";
	secroots-file	"/var/named/data/named.secroots";
	recursing-file	"/var/named/data/named.recursing";
	allow-query     { localhost;192.168.0.0/24; };
zone "." IN {
	type hint;
	file "named.ca";
};

------------------------------------------------------


------------------------------------------------------

Check type records...

;; ANSWER SECTION:
lpic2.com.br.		3600	IN	TXT	"leanning LPIC2"
lpic2.com.br.		3600	IN	SOA	ol9-bind-master.lpic2.com.br. admin.lpic2.com.br. 1 28800 7200 604800 3600
lpic2.com.br.		3600	IN	NS	ol9-bind-slave.lpic2.com.br.
lpic2.com.br.		3600	IN	NS	ol9-bind-master.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	5 mail.lpic2.com.br.
lpic2.com.br.		3600	IN	MX	10 mail2.lpic2.com.br.

------------------------------------------------------

